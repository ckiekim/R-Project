# Naver 에 로그인하기
library(RSelenium)
library(rvest)
library(stringr)
trim <- function(x) gsub("^\\s+|\\s+$", "", x)
remDr<-remoteDriver(remoteServerAddr="localhost", port=4445L, browserName="chrome")
remDr$open()
remDr$navigate("https://nid.naver.com/nidlogin.login")
txt_id <- remDr$findElement(using="css selector", '#id')
(using="id", value="pw")
txt_pw <- remDr$findElement(using="id", value="pw")
login_btn <- remDr$findElement(using="class", value="btn_global")
txt_id$setElementAttribute("value", "ckiekim") # 아이디 입력
txt_pw$setElementAttribute("value", "dongbu-4522")
login_btn$clickElement()
remDr$navigate("https://mail.naver.com/")
mail_texts <- remDr$findElement(using="id", value="list_for_view")
# (using = 'css selector', "subject")
mail_texts
mail_texts <- mail_texts$getElementText()
mail_texts
str_split(mail_texts, '\n')
str_split(mail_texts, '\n')
tmp <- str_split(mail_texts, '\n') %>% .[[1]]
tmp
sender <- c()
subject <- c()
time <- c()
for (i in 1:20) {
sender <- c(sender, tmp[4*i-3])
subject <- c(subject, tmp[4*i-2])
time <- c(time, tmp[4*i-1])
}
sender
subject
time
df_mail <- data.frame(sender=sender, subject=subject, time=time)
df_mail
df_mail <- data.frame(sender=sender, subject=subject, time=time)
()
remDr$close()
remDr$open()
remDr$close()
remDr<-remoteDriver(remoteServerAddr="localhost", port=4445L, browserName="chrome")
remDr$open()
remDr$navigate("https://accounts.google.com/signin/v2/identifier?continue=https%3A%2F%2Fmail.google.com%2Fmail%2F&service=mail&sacu=1&rip=1&flowName=GlifWebSignIn&flowEntry=ServiceLogin")
txt_id <- remDr$findElement(using="css selector", '#identifierId')
txt_id$setElementAttribute("value", "ckiekim@gmail.com") # 아이디 입력
txt_id <- remDr$findElement(using="css selector", '#identifierId')
txt_id$setElementAttribute("value", "ckiekim@gmail.com") # 아이디 입력
txt_id <- remDr$findElement(using="css selector", '#identifierId')
txt_id$setElementAttribute("value", "ckiekim@gmail.com\n") # 아이디 입력
txt_id$setElementAttribute("value", "ckiekim@gmail.com") # 아이디 입력
txt_id$clickElement()
remDr$close()
remDr$open()
remDr$navigate("https://accounts.google.com/signin/v2/identifier?continue=https%3A%2F%2Fmail.google.com%2Fmail%2F&service=mail&sacu=1&rip=1&flowName=GlifWebSignIn&flowEntry=ServiceLogin")
txt_id <- remDr$findElement(using="css selector", '#identifierId')
txt_id$setElementAttribute("value", "ckiekim@gmail.com") # 아이디 입력
txt_id$clickElement()
txt_id <- remDr$findElement(using="css selector", '#identifierId')
txt_id$setElementAttribute("value", "ckiekim@gmail.com\n") # 아이디 입력
txt_id$clickElement()
remDr$close()
remDr$open()
remDr$navigate("https://accounts.google.com/signin/v2/identifier?continue=https%3A%2F%2Fmail.google.com%2Fmail%2F&service=mail&sacu=1&rip=1&flowName=GlifWebSignIn&flowEntry=ServiceLogin")
txt_id <- remDr$findElement(using="css selector", '#identifierId')
txt_id$setElementAttribute("value", "ckiekim@gmail.com\n") # 아이디 입력
txt_id$clickElement()
txt_id <- remDr$findElement(using="css selector", '#identifierId')
txt_id$setElementAttribute("value", "ckiekim@gmail.com\r\n") # 아이디 입력
txt_id$clickElement()
remDr$close()
remDr$open()
remDr$navigate("https://accounts.google.com/signin/v2/identifier?continue=https%3A%2F%2Fmail.google.com%2Fmail%2F&service=mail&sacu=1&rip=1&flowName=GlifWebSignIn&flowEntry=ServiceLogin")
txt_id <- remDr$findElement(using="css selector", '#identifierId')
txt_id$setElementAttribute("value", "ckiekim@gmail.com") # 아이디 입력
txt_id$submitElement()
txt_id$executeScript()
txt_id$phantomExecute()
txt_id$sendKeysToActiveElement()
txt_id$sendKeysToActiveElement('\r\n')
remDr$close()
remDr$open()
remDr$navigate("https://accounts.google.com/signin/v2/identifier?continue=https%3A%2F%2Fmail.google.com%2Fmail%2F&service=mail&sacu=1&rip=1&flowName=GlifWebSignIn&flowEntry=ServiceLogin")
txt_id <- remDr$findElement(using="css selector", '#identifierId')
next_btn <- remDr$findElement(using="css selector", 'RveJvd.snByac')
next_btn <- remDr$findElement(using="css selector", '.RveJvd.snByac')
txt_id$setElementAttribute("value", "ckiekim@gmail.com") # 아이디 입력
next_btn$clickElement()
txt_pw <- remDr$findElement(using="css selector", '.AxoyFc.snByac')
txt_pw <- remDr$findElement(using="css selector", '.AxOyFc.snByac')
txt_pw$setElementAttribute("value", "kim11067")
next_btn <- remDr$findElement(using="css selector", '.RveJvd.snByac')
next_btn$clickElement()
txt_pw$setElementAttribute("value", "kim11067")
next_btn$clickElement()
remDr$close()
remDr$open()
remDr$navigate("https://accounts.google.com/signin/v2/identifier?continue=https%3A%2F%2Fmail.google.com%2Fmail%2F&service=mail&sacu=1&rip=1&flowName=GlifWebSignIn&flowEntry=ServiceLogin")
txt_id <- remDr$findElement(using="css selector", '#identifierId')
next_btn <- remDr$findElement(using="css selector", '.RveJvd.snByac')
txt_id$setElementAttribute("value", "ckiekim@gmail.com") # 아이디 입력
next_btn$clickElement()
txt_pw <- remDr$findElement(using="css selector", '.AxOyFc.snByac')
next_btn <- remDr$findElement(using="css selector", '.RveJvd.snByac')
txt_pw$setElementAttribute("value", "kim11067")
next_btn$clickElement()
remDr$close()
remDr$open()
remDr$navigate("https://accounts.google.com/signin/v2/identifier?continue=https%3A%2F%2Fmail.google.com%2Fmail%2F&service=mail&sacu=1&rip=1&flowName=GlifWebSignIn&flowEntry=ServiceLogin")
txt_id <- remDr$findElement(using="css selector", '#identifierId')
next_btn <- remDr$findElement(using="css selector", '.RveJvd.snByac')
txt_id$setElementAttribute("value", "ckiekim@gmail.com") # 아이디 입력
next_btn$clickElement()
txt_pw <- remDr$findElement(using="css selector", '.whsOnd.zHQkBf')
#txt_pw <- remDr$findElement(using="css selector", '.AxOyFc.snByac')
next_btn <- remDr$findElement(using="css selector", '.RveJvd.snByac')
txt_pw$setElementAttribute("value", "kim11067")
next_btn$clickElement()
remDr$close()
remDr$open()
remDr$navigate("https://accounts.google.com/signin/v2/identifier?continue=https%3A%2F%2Fmail.google.com%2Fmail%2F&service=mail&sacu=1&rip=1&flowName=GlifWebSignIn&flowEntry=ServiceLogin")
txt_id <- remDr$findElement(using="css selector", '#identifierId')
next_btn <- remDr$findElement(using="css selector", '.RveJvd.snByac')
txt_id$setElementAttribute("value", "ckiekim@gmail.com") # 아이디 입력
next_btn$clickElement()
txt_pw <- remDr$findElement(using="css selector", '.whsOnd.zHQkBf')
#txt_pw <- remDr$findElement(using="css selector", '.AxOyFc.snByac')
next_btn <- remDr$findElement(using="css selector", '.RveJvd.snByac')
txt_pw$setElementAttribute("value", "kim11067")
next_btn$clickElement()
remDr$close()
remDr$open()
remDr$navigate("https://accounts.google.com/signin/v2/identifier?continue=https%3A%2F%2Fmail.google.com%2Fmail%2F&service=mail&sacu=1&rip=1&flowName=GlifWebSignIn&flowEntry=ServiceLogin")
txt_id <- remDr$findElement(using="css selector", '#identifierId')
next_btn <- remDr$findElement(using="css selector", '.RveJvd.snByac')
txt_id$setElementAttribute("value", "ckiekim@gmail.com") # 아이디 입력
next_btn$clickElement()
txt_pw <- remDr$findElement(using="css selector", '.whsOnd.zHQkBf')
#txt_pw <- remDr$findElement(using="css selector", '.AxOyFc.snByac')
next_btn <- remDr$findElement(using="css selector", '.RveJvd.snByac')
txt_pw$setElementAttribute("value", "kim11067") # *에 비밀번호 입력
next_btn$clickElement()
remDr$close()
remDr$open()
remDr$navigate("https://accounts.google.com/signin/v2/identifier?continue=https%3A%2F%2Fmail.google.com%2Fmail%2F&service=mail&sacu=1&rip=1&flowName=GlifWebSignIn&flowEntry=ServiceLogin")
txt_id <- remDr$findElement(using="css selector", '#identifierId')
next_btn <- remDr$findElement(using="css selector", '.RveJvd.snByac')
txt_id$setElementAttribute("value", "ckiekim@gmail.com") # 아이디 입력
next_btn$clickElement()
txt_pw <- remDr$findElement(using="css selector", '.whsOnd.zHQkBf')
#txt_pw <- remDr$findElement(using="css selector", '.AxOyFc.snByac')
next_btn <- remDr$findElement(using="css selector", '.RveJvd.snByac')
txt_pw$setElementAttribute("value", "kim11067") # *에 비밀번호 입력
remDr$close()
remDr$open()
remDr$navigate("https://accounts.google.com/signin/v2/identifier?continue=https%3A%2F%2Fmail.google.com%2Fmail%2F&service=mail&sacu=1&rip=1&flowName=GlifWebSignIn&flowEntry=ServiceLogin")
txt_id <- remDr$findElement(using="css selector", '#identifierId')
next_btn <- remDr$findElement(using="css selector", '.RveJvd.snByac')
txt_id$setElementAttribute("value", "ckiekim@gmail.com") # 아이디 입력
next_btn$clickElement()
#remDr$navigate("https://accounts.google.com/signin/v2/sl/pwd?continue=https%3A%2F%2Fmail.google.com%2Fmail&passive=1209600&sacu=1&ignoreShadow=0&hl=ko&acui=0&flowName=GlifWebSignIn&flowEntry=AddSession&cid=1&navigationDirection=forward")
remDr$refresh()
txt_pw <- remDr$findElement(using="css selector", '.whsOnd.zHQkBf')
#txt_pw <- remDr$findElement(using="css selector", '.AxOyFc.snByac')
next_btn <- remDr$findElement(using="css selector", '.RveJvd.snByac')
txt_pw$setElementAttribute("value", "kim11067") # *에 비밀번호 입력
next_btn$clickElement()
#remDr$navigate("https://accounts.google.com/signin/v2/sl/pwd?continue=https%3A%2F%2Fmail.google.com%2Fmail&passive=1209600&sacu=1&ignoreShadow=0&hl=ko&acui=0&flowName=GlifWebSignIn&flowEntry=AddSession&cid=1&navigationDirection=forward")
remDr$refresh()
txt_pw <- remDr$findElement(using="css selector", '.whsOnd.zHQkBf')
#txt_pw <- remDr$findElement(using="css selector", '.AxOyFc.snByac')
next_btn <- remDr$findElement(using="css selector", '.RveJvd.snByac')
remDr$navigate("https://accounts.google.com/signin/v2/identifier?continue=https%3A%2F%2Fmail.google.com%2Fmail%2F&service=mail&sacu=1&rip=1&flowName=GlifWebSignIn&flowEntry=ServiceLogin")
txt_id <- remDr$findElement(using="css selector", '#identifierId')
next_btn <- remDr$findElement(using="css selector", '.RveJvd.snByac')
txt_id$setElementAttribute("value", "ckiekim@gmail.com") # 아이디 입력
next_btn$clickElement()
#remDr$navigate("https://accounts.google.com/signin/v2/sl/pwd?continue=https%3A%2F%2Fmail.google.com%2Fmail&passive=1209600&sacu=1&ignoreShadow=0&hl=ko&acui=0&flowName=GlifWebSignIn&flowEntry=AddSession&cid=1&navigationDirection=forward")
remDr$refresh()
remDr$navigate("https://accounts.google.com/signin/v2/sl/pwd?continue=https%3A%2F%2Fmail.google.com%2Fmail&passive=1209600&sacu=1&ignoreShadow=0&hl=ko&acui=0&flowName=GlifWebSignIn&flowEntry=AddSession&cid=1&navigationDirection=forward")
remDr$navigate("https://accounts.google.com/signin/v2/identifier?continue=https%3A%2F%2Fmail.google.com%2Fmail%2F&service=mail&sacu=1&rip=1&flowName=GlifWebSignIn&flowEntry=ServiceLogin")
txt_id <- remDr$findElement(using="css selector", '#identifierId')
next_btn <- remDr$findElement(using="css selector", '.RveJvd.snByac')
txt_id$setElementAttribute("value", "ckiekim@gmail.com") # 아이디 입력
next_btn$clickElement()
remDr$navigate("https://accounts.google.com/signin/v2/sl/pwd?continue=https%3A%2F%2Fmail.google.com%2Fmail&passive=1209600&sacu=1&ignoreShadow=0&hl=ko&acui=0&flowName=GlifWebSignIn&flowEntry=AddSession&cid=1&navigationDirection=forward")
txt_id <- remDr$findElement(using="css selector", '#identifierId')
next_btn <- remDr$findElement(using="css selector", '.RveJvd.snByac')
txt_id$setElementAttribute("value", "ckiekim@gmail.com") # 아이디 입력
next_btn$clickElement()
#remDr$navigate("https://accounts.google.com/signin/v2/sl/pwd?continue=https%3A%2F%2Fmail.google.com%2Fmail&passive=1209600&sacu=1&ignoreShadow=0&hl=ko&acui=0&flowName=GlifWebSignIn&flowEntry=AddSession&cid=1&navigationDirection=forward")
#remDr$refresh()
txt_pw <- remDr$findElement(using="css selector", '.whsOnd.zHQkBf')
#txt_pw <- remDr$findElement(using="css selector", '.AxOyFc.snByac')
next_btn <- remDr$findElement(using="css selector", '.RveJvd.snByac')
txt_pw$setElementAttribute("value", "kim11067") # *에 비밀번호 입력
next_btn$clickElement()
remDr$close()
remDr<-remoteDriver(remoteServerAddr="localhost", port=4445L, browserName="chrome")
remDr$open()
remDr$navigate("https://nid.naver.com/nidlogin.login")
txt_id <- remDr$findElement(using="css selector", '#id')
txt_pw <- remDr$findElement(using="id", value="pw")
login_btn <- remDr$findElement(using="class", value="btn_global")
txt_id$setElementAttribute("value", "ckiekim") # 아이디 입력
txt_pw$setElementAttribute("value", "dongbu-4522") # *에 비밀번호 입력
login_btn$clickElement()
remDr$navigate("https://mail.naver.com/")
remDr$navigate("https://mail.naver.com/")
#페이지 소스 읽어오기
html <- remDr$getPageSource()[[1]]
html <- read_html(html)
html
html %>%
html_node('#list_for_view')
html %>%
html_node('#list_for_view') %>%
html_nodes('li')
html %>%
html_node('#list_for_view') %>%
html_nodes('li') -> lis
li %>%
html_node('div.name._ccr\(lst\.from\)') %>%
html_node('a') %>%
html_text()
li %>%
html_node('div.name._ccr(lst\.from)') %>%
html_node('a') %>%
html_text()
li %>%
html_node('div.name._ccr(lst.from)') %>%
html_node('a') %>%
html_text()
html %>%
html_node('#list_for_view') %>%
html_nodes('li') -> lis
for (li in lis) {
li %>%
html_node('div.name._ccr(lst.from)') %>%
html_node('a') %>%
html_text()
}
html %>%
html_node('#list_for_view') %>%
html_nodes('li') -> lis
for (li in lis) {
li %>%
html_node('div.name') %>%
html_node('a') %>%
html_text()
}
for (li in lis) {
li %>%
html_node('div.name._ccr(lst\.from)') %>%
html_node('a') %>%
html_text()
}
html %>%
html_node('#list_for_view') %>%
html_node('li') -> li
li
#html_nodes('li') -> lis
li %>%
html_node('div.name')
#html_nodes('li') -> lis
li %>%
html_node('div.name') %>%
html_node('a')
#html_nodes('li') -> lis
li %>%
html_node('div.name') %>%
html_text('a')
#html_nodes('li') -> lis
li %>%
html_node('div.name') %>%
html_node('a') %>% html_text()
html %>%
html_node('#list_for_view') %>%
html_nodes('li') -> lis
for (li in lis) {
li %>%
html_node('div.name') %>%
html_node('a') %>%
html_text()
}
li %>%
html_node('div.name')
html %>%
html_node('#list_for_view') %>%
html_nodes('li') -> lis
lis
li <- lis[1]
li %>%
html_node('div.name') %>%
html_node('a') %>%
html_text()
for (i in 1:20) {
lis[i] %>%
html_node('div.name') %>%
html_node('a') %>%
html_text()
}
for (i in 1:20) {
lis[i] %>%
html_node('div.name') %>%
html_node('a') %>%
html_text()
}
#페이지 소스 읽어오기
html <- remDr$getPageSource()[[1]]
html <- read_html(html)
html %>%
html_node('#list_for_view') %>%
html_nodes('li') -> lis
for (i in 1:20) {
lis[i] %>%
html_node('div.name') %>%
html_node('a') %>%
html_text()
}
li <- lis[1]
li %>%
html_node('div.name') %>%
html_node('a') %>%
html_text()
for (li in lis) {
print(li)
}
html %>%
html_node('#list_for_view') %>%
html_node('ol.mailList.sender_context') %>%
html_nodes('li') -> lis
for (li in lis) {
print(li)
}
for (li in lis) {
#print(li)
li %>%
html_node('div.name') %>%
html_node('a') %>%
html_text()
}
for (li in lis) {
print(li)
}
html %>%
html_node('#list_for_view') %>%
html_nodes('ol>li') -> lis
for (li in lis) {
print(li)
}
for (li in lis) {
#print(li)
li %>%
html_node('div.name') %>%
html_node('a') %>%
html_text()
}
sender <- c()
#print(li)
li %>%
html_node('div.name') %>%
html_node('a') %>%
html_text() -> tmp
for (li in lis) {
li %>%
html_node('div.name') %>%
html_node('a') %>%
html_text() -> tmp
sender <- c(sender, tmp)
li %>%
html_node('div.subject') %>%
html_node('a') %>%
html_node('strong') -> tmp
print(tmp)
}
mail_texts <- remDr$findElement(using="id", value="list_for_view")
for (li in lis) {
li %>%
html_node('div.name') %>%
html_node('a') %>%
html_text() -> tmp
sender <- c(sender, tmp)
li %>%
html_node('div.subject') %>%
html_node('a') %>%
html_node('strong') %>%
html_text() -> tmp
print(tmp)
}
for (li in lis) {
li %>%
html_node('div.name') %>%
html_node('a') %>%
html_text() -> tmp
sender <- c(sender, tmp)
li %>%
html_node('div.subject') %>%
html_node('a') %>%
html_node('strong') %>%
html_text() %>%
trim() -> tmp
print(tmp)
}
mail_texts <- remDr$findElement(using="id", value="list_for_view")
for (li in lis) {
li %>%
html_node('div.name') %>%
html_node('a') %>%
html_text() -> tmp
sender <- c(sender, tmp)
li %>%
html_node('div.subject') %>%
html_node('a') %>%
html_node('strong') %>%
html_text() %>%
trim() -> tmp
print(str_sub(tmp, 7, -1))
}
subject <- c()
time <- c()
for (li in lis) {
li %>%
html_node('div.name') %>%
html_node('a') %>%
html_text() -> tmp
sender <- c(sender, tmp)
li %>%
html_node('div.subject') %>%
html_node('a') %>%
html_node('strong') %>%
html_text() %>%
trim() -> tmp
subject <- c(subject, str_sub(tmp, 7, -1))
li %>%
html_node('iDate') %>%
html_text() -> tmp
print(tmp)
}
for (li in lis) {
li %>%
html_node('div.name') %>%
html_node('a') %>%
html_text() -> tmp
sender <- c(sender, tmp)
li %>%
html_node('div.subject') %>%
html_node('a') %>%
html_node('strong') %>%
html_text() %>%
trim() -> tmp
subject <- c(subject, str_sub(tmp, 7, -1))
li %>%
html_node('.iDate') %>%
html_text() -> tmp
print(tmp)
}
for (li in lis) {
li %>%
html_node('div.name') %>%
html_node('a') %>%
html_text() -> tmp
sender <- c(sender, tmp)
li %>%
html_node('div.subject') %>%
html_node('a') %>%
html_node('strong') %>%
html_text() %>%
trim() -> tmp
subject <- c(subject, str_sub(tmp, 7, -1))
li %>%
html_node('.iDate') %>%
html_text() -> tmp
time <- c(time, str_sub(tmp, 6, -1))
}
df_mail <- data.frame(sender=sender, subject=subject, time=time)
sender <- c()
subject <- c()
time <- c()
for (li in lis) {
li %>%
html_node('div.name') %>%
html_node('a') %>%
html_text() -> tmp
sender <- c(sender, tmp)
li %>%
html_node('div.subject') %>%
html_node('a') %>%
html_node('strong') %>%
html_text() %>%
trim() -> tmp
subject <- c(subject, str_sub(tmp, 7, -1))
li %>%
html_node('.iDate') %>%
html_text() -> tmp
time <- c(time, str_sub(tmp, 6, -1))
}
df_mail <- data.frame(sender=sender, subject=subject, time=time)
df_mail
remDr$close()
